
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>巨獸搖滾官方頻道</title>

    <link href="./bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

    <script type="text/javascript" src="./bower_components/jquery/dist/jquery.min.js"></script>
    <!-- <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?language=zh-TW"></script> -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style type="text/css">
      body {
        background: #231815;
      }
      #message {
        background: #FFFFEF;
        padding: 8px;
      }
      #camera {
        padding: 3px;
      }
      .view {
        /*background: #21aa94;*/
      }
      .left {
        background-image: url('https://yutin1987.github.io/beastierock/www/images/left.jpg');
        background-size: cover;
        background-position: center center;
      }
      .right {
        background-image: url('https://yutin1987.github.io/beastierock/www/images/right.jpg');
        background-size: cover;
        background-position: center center;
      }
      .footer {
        background-image: url('https://yutin1987.github.io/beastierock/www/images/menu.jpg');
        background-size: cover;
        background-position: center center;
      }
      #player {
        padding: 0;
      }
    </style>

    <script type="text/javascript">
      var pwd = [38, 40, 38, 40, 37, 39, 37, 39, 65, 66];
      var pwdIndex = 0;
      var camera = [
        'http://www.youtube.com/embed/y3FpqL1yZEg?hd=1&autoplay=1',
        'http://www.youtube.com/embed/y3FpqL1yZEg?hd=1&autoplay=1'
      ];

      var gotoPlay = function (index) {
        $('#player_iframe').attr('src', camera[index]);
      }

      var display = function () {
        $('#player_iframe').attr('src', camera[0]);
        $('#message').remove();
        $('#camera').show();
      };

      $(function(){
        var player = $('#player');
        var player_iframe = $('#player_iframe');

        var width = player.width();
        player_iframe.width(width);
        player_iframe.height(width * 0.6);
        $('.left').height(width * 0.48);
        $('.right').height(width * 0.48);
        $('#camera').hide();

        $("body").keydown( function(e) {
          if (e.keyCode == pwd[pwdIndex]) {
            pwdIndex++;
            if (pwd.length <= pwdIndex) {
              display();
              pwdIndex = 0;
            }
          } else {
            pwdIndex = 0;
          }
        });
      });
      $(function(){
        if(navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            function(position) {
              var x = position.coords.latitude;
              var y = position.coords.longitude;
              console.log(x, y);
              console.log('https://maps.googleapis.com/maps/api/geocode/json?latlng=' + x + ',' + y);
              $.get('https://maps.googleapis.com/maps/api/geocode/json?latlng=' + x + ',' + y, function (res) {
                var result = res.results;
                for (var i = result.length - 1; i >= 0; i--) {
                  if (/Taiwan|台灣|臺灣/.exec(result[i].formatted_address)) {
                    $('#message').text('Sorry! 此頻道只支援非台灣地區收看.');
                    return;
                  }
                };
                display();
              });
            }, function(err) {
              console.log(err);
              $('#message').text('Sorry! Live streaming available outside Taiwan.');
              alert('Sorry! Live streaming available outside Taiwan.')
            }, {timeout:60000}
          );
        } else {
        }
      });
    </script>
  </head>

  <body>
      <div class="row view">
        <div class="col-md-2 left">
          
        </div>
        <div class="col-md-8" id="player">
          <div id="message">
            Get locations...
          </div>
          <iframe id="player_iframe" type="text/html" width="100%" height="" src="" frameborder="0"></iframe>
          <div id="camera">
            <button type="button" class="btn btn-default" onclick="gotoPlay(0);">Camera 1</button>
            <button type="button" class="btn btn-default" onclick="gotoPlay(1);">Camera 2</button>
          </div>
        </div>
        <div class="col-md-2 right">
          
        </div>
      </div>
      <div class="footer">
      </div>
  </body>
</html>